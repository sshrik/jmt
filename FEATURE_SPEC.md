# 📋 JMT 투자 전략 플랫폼 기능 정의서

> **JMT (Just Make Trading) - 투자 전략 백테스트 플랫폼**  
> 버전: v1.0.0 | 업데이트: 2024.01.01  
> 시각적 전략 설계와 백테스트를 통한 투자 전략 검증 플랫폼

---

## 🎯 플랫폼 개요

JMT는 개인 투자자를 위한 **노코드 투자 전략 설계 및 백테스트 플랫폼**입니다. 복잡한 프로그래밍 지식 없이도 직관적인 UI를 통해 투자 전략을 설계하고, 과거 데이터를 활용한 백테스트로 전략의 유효성을 검증할 수 있습니다.

### 🌟 핵심 가치

- **📊 데이터 기반 의사결정**: 실제 주식 데이터로 전략 검증
- **🎨 직관적 설계**: 드래그앤드롭으로 전략 생성
- **📈 성과 추적**: 다양한 지표로 투자 성과 분석
- **🔄 지속적 개선**: 버전 관리를 통한 전략 진화

---

## 🏗️ 기술 스택

### Frontend

- **Framework**: Vite + React 18 + TypeScript
- **UI Library**: Mantine UI v7
- **Charts**: Recharts
- **Flow Editor**: React Flow
- **Icons**: Tabler Icons
- **Routing**: TanStack Router

### Data & Storage

- **Stock Data**: Yahoo Finance (yahoo-finance2)
- **Storage**: Local Storage
- **State Management**: Custom React Hooks

### Development

- **Build Tool**: Vite
- **Package Manager**: Yarn
- **Linting**: ESLint + TypeScript
- **Git**: Angular Commit Convention

---

## 📱 페이지 구조 및 기능

### 🏠 1. 대시보드 (`/`)

#### 📍 페이지 목적

투자 전략 프로젝트들의 성과를 한눈에 확인하고 관리할 수 있는 메인 허브

#### ✅ 구현된 기능

- **📊 성과 요약 카드**
  - 총 프로젝트 수
  - 최고 수익률
  - 평균 수익률
- **🏆 프로젝트 순위**
  - 수익률 기준 내림차순 정렬
  - 상위 3개 프로젝트 순위 배지 (🥇🥈🥉)
- **💰 투자 수익률 강조 표시**
  - 각 프로젝트별 수익률 카드
  - 수익/손실 색상 구분 (녹색/빨간색)
  - 시각적 트렌드 아이콘
- **⚡ 빠른 액션**
  - 프로젝트 상세보기/수정
  - 프로젝트 삭제 (확인 모달 포함)

### 📂 2. 프로젝트 목록 (`/projects`)

#### 📍 페이지 목적

모든 투자 전략 프로젝트를 체계적으로 관리하는 전용 페이지

#### ✅ 구현된 기능

- **📋 프로젝트 카드 목록**
  - 제목, 설명, 버전 개수
  - 마지막 수정일자
  - 액션 메뉴 (상세보기/수정/삭제)
- **➕ 프로젝트 생성**
  - 새 프로젝트 버튼
  - 프로젝트 생성 모달
- **🗑️ 프로젝트 삭제**
  - 안전 확인 모달
  - 완전 삭제 기능

### 📊 3. 프로젝트 상세 (`/projects/:id`)

#### 📍 페이지 목적

개별 프로젝트의 상세 정보와 버전 관리

#### ✅ 구현된 기능

- **📑 탭 기반 인터페이스**
  - 투자 전략 탭
  - 백테스트 탭
  - 개요 탭
- **📋 프로젝트 정보**
  - 기본 정보 표시
  - 생성일, 수정일
  - 프로젝트 설명

### ✏️ 4. 전략 편집 (`/projects/:id/edit`)

#### 📍 페이지 목적

투자 전략을 설계하고 편집할 수 있는 고급 에디터

#### ✅ 구현된 기능

- **🎛️ 이중 에디터 시스템**
  - **룰 기반 에디터**: 조건-액션 쌍으로 전략 구성
  - **플로우차트 에디터**: React Flow 기반 시각적 설계
- **🔄 실시간 동기화**
  - 두 에디터 간 자동 변환
  - 데이터 일관성 보장
- **🎯 룰 기반 에디터**
  - 조건/액션 블록 추가/삭제
  - 다중 조건/액션 지원
  - 세로 배치로 가독성 향상
- **🎨 플로우차트 에디터**
  - 드래그앤드롭 노드 추가
  - 커스텀 마우스 기반 드래그 시스템
  - 노드 타입: Start, Schedule, Condition, Action, End
  - 연결선 관리 (액션 노드는 단일 입력만 허용)
  - 실시간 드래그 피드백 (DragCursor)
- **💾 자동 저장**
  - 디바운싱된 자동 저장 (2초)
  - 변경사항 감지 및 저장

### 🧪 5. 백테스트 (`/backtest`)

#### 📍 페이지 목적

투자 전략의 백테스트 실행 및 결과 분석

#### ✅ 구현된 기능

- **⚙️ 백테스트 설정**
  - 기간 선택 (시작일/종료일)
  - 초기 투자금 설정
  - 종목 선택
- **🚀 백테스트 실행**
  - 실시간 진행률 표시
  - 백그라운드 실행
  - 중단/재시작 기능
- **📊 결과 시각화**
  - 포트폴리오 가치 변화 차트
  - 누적 수익률 그래프
  - 거래 내역 테이블
- **📈 성과 지표**
  - 총 수익률
  - 최대 낙폭 (Maximum Drawdown)
  - 총 거래 횟수
  - 승률 계산

### 📈 6. 주식 추이 확인 (`/flowchart`)

#### 📍 페이지 목적

종목별 주가 정보와 차트를 확인할 수 있는 분석 도구

#### ✅ 구현된 기능

- **📋 종목 선택**
  - 드롭다운 종목 선택기
  - 날짜 선택기
- **💰 주가 정보 표시**
  - 최신 주가 및 변동폭 (큰 카드)
  - 선택된 날짜의 OHLCV 정보
  - 상승/하락 색상 및 아이콘 표시
- **📊 차트 시각화**
  - 최근 90일 종가 추이 차트
  - Recharts 기반 인터랙티브 차트
- **🔄 데이터 새로고침**
  - 수동 새로고침 버튼
  - 로딩 상태 표시

### ⚙️ 7. 환경설정 (`/settings`)

#### 📍 페이지 목적

앱 설정 관리 및 데이터 백업/복원

#### ✅ 구현된 기능

- **🎨 앱 설정**
  - 알림 활성화/비활성화
  - 테마 선택 (라이트/다크/시스템)
  - 자동 저장 간격 설정
- **💾 데이터 관리**
  - 로컬 스토리지 정보 표시
  - 데이터 내보내기 (JSON)
  - 데이터 가져오기
  - 전체 데이터 초기화
- **📊 저장소 현황**
  - 프로젝트 개수
  - 주식 데이터 개수
  - 총 저장 용량
- **ℹ️ 앱 정보**
  - 버전 정보
  - 빌드 날짜
  - 개발팀 정보

---

## 🧠 핵심 시스템

### 📊 백테스트 엔진

#### ✅ 구현된 기능

- **BacktestEngine 클래스**
  - 전략 실행 시뮬레이션
  - 포트폴리오 가치 추적
  - 거래 내역 기록
- **지원 액션 타입**
  - `buy`: 매수 (비율 기반)
  - `sell`: 매도 (비율 기반)
  - `hold`: 보유
  - `exit_all`: 전량 매도
  - `pause_strategy`: 전략 일시정지
- **수수료 계산**
  - 매수/매도 시 거래 수수료 적용
  - 실제 투자 환경 반영

### 📈 데이터 관리

#### ✅ 구현된 기능

- **Yahoo Finance 연동**
  - `yahoo-finance2` 라이브러리 사용
  - 일별 주가 데이터 (OHLCV)
  - 로컬 캐싱으로 성능 최적화
- **지원 종목**
  - 삼성전자 (005930.KS)
  - SK하이닉스 (000660.KS)
  - NAVER (035420.KS)
  - 카카오 (035720.KS)
  - LG에너지솔루션 (373220.KS)
- **데이터 구조**
  - `StockPrice`: 일별 주가 정보
  - `StockInfo`: 종목 메타데이터
  - `StockData`: 전체 종목 데이터

### 🎯 플로우 실행 엔진

#### ✅ 구현된 기능

- **FlowExecutionEngine 클래스**
  - React Flow 기반 전략 해석
  - 노드 간 연결 추적
  - 조건 평가 및 액션 실행
- **지원 노드 타입**
  - `start`: 시작 노드
  - `schedule`: 실행 일정 노드
  - `condition`: 조건 평가 노드
  - `action`: 액션 실행 노드
  - `end`: 종료 노드

---

## 🗄️ 데이터 구조

### 📋 프로젝트 관리

```typescript
interface Project {
  id: string;
  name: string;
  description: string;
  createdAt: Date;
  updatedAt: Date;
  versions: Version[];
}

interface Version {
  id: string;
  projectId: string;
  versionName: string;
  description: string;
  createdAt: Date;
  strategy: StrategyBlock[];
  backtestResults?: BacktestResult;
}
```

### 🧩 전략 블록

```typescript
interface StrategyBlock {
  id: string;
  type: "condition" | "action";
  conditionType?: "price_comparison" | "percentage_change";
  actionType?: "buy" | "sell" | "hold" | "exit_all";
  config: PriceConditionConfig | ActionConfig;
}
```

### 📊 백테스트 결과

```typescript
interface BacktestResult {
  totalReturn: number;
  maxDrawdown: number;
  totalTrades: number;
  winRate: number;
  trades: Trade[];
  portfolioHistory: PortfolioSnapshot[];
  stats: BacktestStats;
}
```

---

## 🎨 UI/UX 특징

### 🎯 디자인 원칙

- **직관적 네비게이션**: 사이드바 기반 명확한 구조
- **일관성**: Mantine UI 디자인 시스템 전면 활용
- **반응형**: 모바일/태블릿 대응 (부분적)
- **접근성**: 색상 대비, 키보드 네비게이션 고려

### 🚀 성능 최적화

- **지연 로딩**: 라우트별 코드 스플리팅
- **데이터 캐싱**: 로컬 스토리지 활용
- **디바운싱**: 자동 저장 및 검색 최적화
- **메모이제이션**: React.memo, useMemo 적극 활용

---

## 🔄 워크플로우

### 👨‍💼 사용자 여정

1. **📊 대시보드 확인**
   - 기존 프로젝트 성과 검토
   - 최고 수익률 프로젝트 식별

2. **📂 프로젝트 생성/선택**
   - 새 전략 아이디어로 프로젝트 생성
   - 기존 프로젝트 선택하여 개선

3. **✏️ 전략 설계**
   - 룰 기반 또는 플로우차트로 전략 구성
   - 조건과 액션의 논리적 연결
   - 실시간 미리보기 및 검증

4. **🧪 백테스트 실행**
   - 과거 데이터로 전략 성과 검증
   - 결과 분석 및 개선점 도출

5. **📈 성과 분석**
   - 수익률, 위험도 등 지표 검토
   - 다른 전략과 비교 분석

6. **🔄 전략 개선**
   - 백테스트 결과 기반 전략 수정
   - 새 버전 생성 및 재검증

---

## 🎯 현재 상태 및 다음 단계

### ✅ 완료된 기능 (구현률: ~85%)

- [x] **기본 프로젝트 관리 시스템**
- [x] **이중 전략 에디터 (룰 + 플로우차트)**
- [x] **실제 주식 데이터 연동**
- [x] **백테스트 엔진 및 시각화**
- [x] **성과 중심 대시보드**
- [x] **주식 추이 확인 도구**
- [x] **환경설정 및 데이터 관리**
- [x] **사이드바 네비게이션**

### 🚧 개선 필요 사항

- [ ] **모바일 반응형 완성**
- [ ] **드래그앤드롭 안정성 향상**
- [ ] **백테스트 성능 최적화**
- [ ] **에러 핸들링 강화**
- [ ] **사용자 가이드/튜토리얼**

### 🔮 향후 확장 계획

- [ ] **더 많은 주식 종목 및 지수**
- [ ] **고급 기술적 지표**
- [ ] **포트폴리오 분산 투자**
- [ ] **실시간 알림 시스템**
- [ ] **커뮤니티 및 전략 공유**
- [ ] **API 서버 및 클라우드 배포**

---

## 📞 기술 지원

### 🐛 알려진 이슈

- 플로우차트 에디터에서 간헐적 드래그 이슈 (대부분 해결됨)
- 대용량 백테스트 시 브라우저 메모리 사용량 증가
- 일부 모바일 기기에서 차트 렌더링 지연

### 📝 개발 노트

- Angular 스타일 커밋 메시지 컨벤션 사용
- ESLint 규칙: `_` prefix 변수는 unused 허용
- TypeScript strict 모드 활성화
- Yarn 패키지 매니저 사용

---

_마지막 업데이트: 2024.01.01 | 문서 버전: v2.0_
