# 📋 JMT 투자 전략 플랫폼 기능 정의서

> **JMT (Just Make Trading) - 투자 전략 백테스트 플랫폼**  
> 버전: v1.0.0 | 릴리즈: 2024.12.18  
> 시각적 전략 설계와 백테스트를 통한 투자 전략 검증 플랫폼

---

## 🎯 플랫폼 개요

JMT는 개인 투자자를 위한 **노코드 투자 전략 설계 및 백테스트 플랫폼**입니다. 복잡한 프로그래밍 지식 없이도 직관적인 UI를 통해 투자 전략을 설계하고, 과거 데이터를 활용한 백테스트로 전략의 유효성을 검증할 수 있습니다.

### 🌟 핵심 가치

- **📊 데이터 기반 의사결정**: 실제 주식 데이터로 전략 검증
- **🎨 직관적 설계**: 드래그앤드롭으로 전략 생성
- **📈 성과 추적**: 다양한 지표로 투자 성과 분석
- **🔄 지속적 개선**: 버전 관리를 통한 전략 진화
- **🌙 다크모드 지원**: 사용자 환경에 최적화된 UI

---

## 🏗️ 기술 스택

### Frontend

- **Framework**: Vite + React 18 + TypeScript
- **UI Library**: Mantine UI v7 (완전 테마 지원)
- **Charts**: Recharts (듀얼 Y축, 인터랙티브)
- **Flow Editor**: React Flow (커스텀 노드, 마우스 드래그)
- **Icons**: Tabler Icons
- **Routing**: TanStack Router

### Data & Storage

- **Stock Data**: Yahoo Finance (yahoo-finance2) - 30년 히스토리
- **Storage**: Local Storage (백업/복원 지원)
- **State Management**: Custom React Hooks + Context

### Development

- **Build Tool**: Vite
- **Package Manager**: Yarn
- **Linting**: ESLint + TypeScript (Custom Rules)
- **Git**: Angular Commit Convention
- **Testing**: 커스텀 드래그앤드롭 테스트

---

## 📱 페이지 구조 및 기능

### 🏠 1. 대시보드 (`/`)

#### 📍 페이지 목적

투자 전략 프로젝트들의 성과를 한눈에 확인하고 관리할 수 있는 메인 허브

#### ✅ 구현된 기능 (v1.0.0)

- **📊 성과 요약 카드**
  - 총 프로젝트 수
  - 최고 수익률 (백테스트 기반)
  - 평균 수익률 (실제 계산값)
- **🏆 프로젝트 순위**
  - 백테스트 수익률 기준 내림차순 정렬
  - 상위 3개 프로젝트 순위 배지 (🥇🥈🥉)
  - 수익률이 양수인 프로젝트만 순위 표시
- **💰 투자 수익률 강조 표시**
  - 각 프로젝트별 퍼센트 수익률 카드 (+12.5% 형식)
  - 수익/손실 색상 구분 (녹색/빨간색)
  - 시각적 트렌드 아이콘
- **🎨 개선된 카드 레이아웃**
  - 순위 칩이 프로젝트 이름 옆에 인라인 배치
  - 긴 프로젝트 이름은 2줄로 표시 (말줄임 처리)
  - ... 메뉴 버튼과 겹침 방지
- **⚡ 빠른 액션**
  - 새 프로젝트 생성 모달 (헤더 버튼 제거, 모달로 통합)
  - 프로젝트 상세보기/수정
  - 프로젝트 삭제 (확인 모달 포함)

### 📂 2. 프로젝트 목록 (`/projects`)

#### 📍 페이지 목적

모든 투자 전략 프로젝트를 체계적으로 관리하는 전용 페이지

#### ✅ 구현된 기능 (v1.0.0)

- **📋 프로젝트 카드 목록**
  - 제목, 설명, 버전 개수
  - 마지막 수정일자
  - 액션 메뉴 (상세보기/수정/삭제)
- **➕ 프로젝트 생성**
  - 새 프로젝트 모달 (대시보드와 통합)
  - 생성 후 편집 페이지로 자동 이동
- **🗑️ 프로젝트 삭제**
  - 안전 확인 모달
  - 완전 삭제 기능
- **🔄 라우팅 개선**
  - Outlet 기반 중첩 라우팅
  - 상세/편집 페이지 정상 동작

### 📊 3. 프로젝트 상세 (`/projects/:id`)

#### 📍 페이지 목적

개별 프로젝트의 상세 정보와 백테스트 결과 조회

#### ✅ 구현된 기능 (v1.0.0)

- **📑 탭 기반 인터페이스**
  - 개요 탭 (프로젝트 정보)
  - 투자 전략 탭 (읽기 전용)
  - 백테스트 탭 (결과 조회)
- **📋 프로젝트 정보**
  - 기본 정보 표시
  - 생성일, 수정일
  - 프로젝트 설명
- **📈 백테스트 결과 조회**
  - 저장된 백테스트 결과 표시
  - 성과 지표 및 차트
  - 백테스트 재실행 가능

### ✏️ 4. 전략 편집 (`/projects/:id/edit`)

#### 📍 페이지 목적

투자 전략을 설계하고 편집할 수 있는 고급 에디터

#### ✅ 구현된 기능 (v1.0.0)

- **🎛️ 이중 에디터 시스템**
  - **룰 기반 에디터**: 조건-액션 쌍으로 전략 구성
  - **플로우차트 에디터**: React Flow 기반 시각적 설계
- **🔄 실시간 동기화**
  - 두 에디터 간 자동 변환
  - 데이터 일관성 보장
- **🎯 룰 기반 에디터 (대폭 개선)**
  - 조건/액션 블록 추가/삭제
  - 다중 조건/액션 지원
  - 세로 배치로 가독성 향상
  - **스마트 삭제 버튼**: 1개만 남은 경우 삭제 비활성화
  - **적절한 간격**: 규칙 쌍 간 xl 간격 적용
  - **조건 로직 명확화**: "5% 이상/이하" 표시로 임계값 의미 명확화
- **🎨 플로우차트 에디터 (완전 재구현)**
  - **커스텀 마우스 드래그**: HTML5 Drag API 대신 마우스 이벤트 기반
  - **즉시 드래그**: 첫 번째 드래그로 바로 노드 생성
  - **드래그 피드백**: 실시간 DragCursor로 드래그 중인 노드 표시
  - **가로 배치 팔레트**: 노드 추가 블록들을 가로로 배치
  - **일관된 블록 크기**: 120px 고정 너비
  - **개선된 노드 간격**: 1200px 규칙 간격, 600px 조건-액션 간격
  - **무제한 줌아웃**: minZoom 0.001로 전체 차트 조망 가능
  - **자동 fitView**: 노드 변경 시 자동으로 전체 보기
  - **연결 제한**: 액션 노드는 단일 입력만 허용
  - **툴팁 제거**: 불필요한 안내 툴팁 모두 제거
- **💾 자동 저장**
  - 디바운싱된 자동 저장 (2초)
  - 변경사항 감지 및 저장
- **🎮 통합 인터페이스**
  - 도움말/미리보기/자동저장을 단일 메뉴로 통합
  - 취소 버튼 제거 (단순화)
  - 실행 가능 여부 칩만 유지

### 🧪 5. 백테스트 시스템 (통합)

#### 📍 페이지 목적

투자 전략의 백테스트 실행 및 결과 분석

#### ✅ 구현된 기능 (v1.0.0)

- **⚙️ 백테스트 설정 (개선됨)**
  - 기간 선택 (시작일/종료일)
  - 초기 투자금 설정
  - 종목 선택 (30년 데이터 지원)
  - **수수료율 툴팁**: 일반적인 수수료 범위 및 설명
  - **슬리피지율 툴팁**: 주문가격과 체결가격 차이 설명
- **🚀 백테스트 실행**
  - 실시간 진행률 표시
  - 백그라운드 실행
  - 중단/재시작 기능
  - **자동 결과 저장**: 백테스트 완료 시 프로젝트에 자동 저장
- **📊 결과 시각화 (대폭 개선)**
  - **듀얼 Y축 차트**: 포트폴리오 가치(₩) + 수익률(%) 동시 표시
  - 누적 수익률 그래프
  - 거래 내역 테이블
  - **수정된 툴팁**: 포트폴리오 가치 정확히 표시
- **📈 성과 지표 (향상됨)**
  - **퍼센트 수익률**: 절대값이 아닌 실제 수익률 표시
  - 최대 낙폭 (Maximum Drawdown)
  - 총 거래 횟수
  - **수익 거래 비율**: 기존 "승률"을 이해하기 쉽게 변경
  - **위험 지표 툴팁**: 변동성, 샤프 비율, 최대 낙폭, 위험 점수 설명
- **🔄 진행 상황 모달**
  - 준비/실행/완료/오류 상태 표시
  - **중복 메시지 제거**: 완료 시 단일 메시지만 표시

### 📈 6. 주식 추이 확인 (`/flowchart`) → 주식 추이 확인

#### 📍 페이지 목적

종목별 주가 정보와 차트를 확인할 수 있는 분석 도구

#### ✅ 구현된 기능 (v1.0.0)

- **📋 종목 선택**
  - 드롭다운 종목 선택기
  - **커스텀 기간 선택**: 최근 90일 대신 원하는 기간 설정
  - **데이터 샘플링**: 장기간 데이터는 자동 샘플링 (일별/주별/월별/분기별)
- **💰 주가 정보 표시 (개선됨)**
  - 선택된 날짜의 OHLCV 정보 (전략 정보 제거)
  - 상승/하락 색상 및 아이콘 표시
  - **세로 배치**: 종목 정보와 차트를 세로로 배치
  - **논리적 그룹핑**: Divider로 종목 선택, 정보, 차트 구분
- **📊 차트 시각화**
  - 선택 기간 종가 추이 차트
  - Recharts 기반 인터랙티브 차트
  - 장기간 데이터 최적화
- **🔄 30년 히스토리 지원**
  - 확장된 주식 데이터 (1994년부터)
  - S&P 500 지수 포함
  - 더 많은 종목 지원

### ⚙️ 7. 환경설정 (`/settings`)

#### 📍 페이지 목적

앱 설정 관리 및 데이터 백업/복원

#### ✅ 구현된 기능 (v1.0.0)

- **🎨 앱 설정 (완전 구현)**
  - 알림 활성화/비활성화
  - **실제 동작하는 테마**: 라이트/다크/시스템 테마 즉시 적용
  - 자동 저장 간격 설정
  - **개선된 아이콘 정렬**: Group 레이아웃으로 완벽 정렬
- **💾 데이터 관리**
  - 로컬 스토리지 정보 표시
  - 데이터 내보내기 (JSON)
  - 데이터 가져오기
  - 전체 데이터 초기화
- **📊 저장소 현황**
  - 프로젝트 개수
  - 주식 데이터 개수
  - 총 저장 용량
- **👨‍💻 개발자 정보 (신규)**
  - **@sshrik GitHub 링크**: 클릭 가능한 개발자 프로필
  - GitHub 저장소 링크
  - 기존 앱 정보 대신 실제 개발자 정보

---

## 🧠 핵심 시스템

### 📊 백테스트 엔진 (v1.0.0)

#### ✅ 구현된 기능

- **BacktestEngine 클래스**
  - 전략 실행 시뮬레이션
  - 포트폴리오 가치 추적
  - 거래 내역 기록
  - **퍼센트 수익률 계산**: totalReturnPct 필드 추가
- **지원 액션 타입**
  - `buy`: 매수 (비율 기반)
  - `sell`: 매도 (비율 기반)
  - `hold`: 보유
  - `exit_all`: 전량 매도
  - `pause_strategy`: 전략 일시정지
  - `alert`: 알림
  - `log`: 로깅
- **수수료 & 슬리피지**
  - 매수/매도 시 거래 수수료 적용
  - 슬리피지율 반영
  - 실제 투자 환경 반영

### 📈 데이터 관리 (v1.0.0)

#### ✅ 구현된 기능

- **Yahoo Finance 연동**
  - `yahoo-finance2` 라이브러리 사용
  - **30년 히스토리**: 1994년부터 현재까지
  - 일별 주가 데이터 (OHLCV)
  - 로컬 캐싱으로 성능 최적화
- **확장된 지원 종목**
  - 삼성전자, SK하이닉스, NAVER, 카카오, LG에너지솔루션
  - **S&P 500 지수 (^GSPC)**
  - NASDAQ, NYSE 주요 종목
  - 암호화폐 (BTC, ETH)
- **데이터 구조**
  - `StockPrice`: 일별 주가 정보
  - `StockInfo`: 종목 메타데이터
  - `StockData`: 전체 종목 데이터
  - `StockSummary`: 통계 요약 정보

### 🎯 플로우 실행 엔진 (v1.0.0)

#### ✅ 구현된 기능

- **FlowExecutionEngine 클래스**
  - React Flow 기반 전략 해석
  - 노드 간 연결 추적
  - **조건 평가 로직**: 이상/이하 정확한 구현
  - 액션 실행
- **지원 노드 타입**
  - `start`: 시작 노드
  - `schedule`: 실행 일정 노드
  - `condition`: 조건 평가 노드 (개선된 UI)
  - `action`: 액션 실행 노드 (단일 입력 제한)
  - `end`: 종료 노드

### 🎨 테마 시스템 (v1.0.0 신규)

#### ✅ 구현된 기능

- **Mantine 테마 통합**
  - MantineProvider 설정
  - createTheme + useMantineColorScheme
  - localStorage 영속성
- **지원 테마**
  - **라이트 테마**: 기본 밝은 테마
  - **다크 테마**: 눈의 피로 감소
  - **시스템 테마**: OS 설정 자동 감지
- **실시간 전환**
  - 설정 변경 즉시 적용
  - 페이지 새로고침 불필요
  - 모든 컴포넌트 자동 적용

---

## 🗄️ 데이터 구조

### 📋 프로젝트 관리

```typescript
interface Project {
  id: string;
  name: string;
  description: string;
  createdAt: Date;
  updatedAt: Date;
  versions: Version[];
}

interface Version {
  id: string;
  projectId: string;
  versionName: string;
  description: string;
  createdAt: Date;
  strategy: StrategyBlock[];
  backtestResults?: BacktestResult; // 자동 저장됨
}
```

### 🧩 전략 블록

```typescript
interface StrategyBlock {
  id: string;
  type: "condition" | "action";
  conditionType?: "price_comparison" | "percentage_change";
  actionType?:
    | "buy"
    | "sell"
    | "hold"
    | "exit_all"
    | "pause_strategy"
    | "alert"
    | "log";
  config: PriceConditionConfig | ActionConfig;
}

// 조건 설정에 이상/이하 로직 포함
interface PercentageConditionConfig {
  priceChangeDirection: "up" | "down"; // 이상/이하 구분
  priceChangePercent: number; // 임계값
}
```

### 📊 백테스트 결과

```typescript
interface BacktestResult {
  totalReturn: number; // 퍼센트 수익률
  maxDrawdown: number;
  tradeCount: number;
  winRate: number;
  transactions: Transaction[];
  portfolioHistory: PortfolioSnapshot[];
  initialCash: number;
  backtestPeriod: { startDate: Date; endDate: Date };
}
```

---

## 🎨 UI/UX 특징

### 🎯 디자인 원칙

- **완벽한 정렬**: 모든 아이콘과 텍스트 픽셀 퍼펙트 정렬
- **다크모드 최적화**: 가독성과 시각적 편안함 양립
- **일관성**: Mantine UI 디자인 시스템 전면 활용
- **반응형**: 모바일/태블릿 대응
- **접근성**: 색상 대비, 키보드 네비게이션, 툴팁 설명

### 🌙 다크모드 특화 (v1.0.0)

- **사이드바 최적화**
  - 텍스트: mantine-color-dark-1 (향상된 대비)
  - 활성 메뉴: mantine-color-dark-6 (부드러운 강조)
  - 섹션 헤더: dark.2 (적절한 대비)
- **자연스러운 호버 효과**
  - 다크모드: mantine-color-dark-7
  - 라이트모드: mantine-color-gray-0
- **일관된 색상 체계**
  - 모든 컴포넌트에서 테마 반응
  - 차트 및 그래프 색상 자동 조정

### 🚀 성능 최적화

- **지연 로딩**: 라우트별 코드 스플리팅
- **데이터 캐싱**: 로컬 스토리지 + 30년 히스토리
- **디바운싱**: 자동 저장 및 검색 최적화
- **메모이제이션**: React.memo, useMemo 적극 활용
- **차트 최적화**: 장기간 데이터 샘플링

---

## 🔄 워크플로우

### 👨‍💼 사용자 여정 (v1.0.0)

1. **🌙 환경 설정**
   - 선호하는 테마 설정 (다크/라이트/시스템)
   - 즉시 적용되는 UI 확인

2. **📊 대시보드 확인**
   - 기존 프로젝트 성과 검토 (실제 백테스트 수익률)
   - 최고 수익률 프로젝트 식별 (순위 배지)
   - 성과순 정렬로 우수 전략 파악

3. **📂 프로젝트 생성/선택**
   - 모달을 통한 새 전략 프로젝트 생성
   - 기존 프로젝트 선택하여 개선

4. **✏️ 전략 설계**
   - **룰 기반**: 조건-액션 쌍으로 논리적 구성
   - **플로우차트**: 드래그앤드롭으로 시각적 설계
   - 두 방식 간 실시간 동기화
   - 자동 저장으로 작업 손실 방지

5. **🧪 백테스트 실행**
   - 30년 히스토리 데이터로 전략 검증
   - 실시간 진행률과 결과 확인
   - **자동 저장**: 완료 시 프로젝트에 결과 저장

6. **📈 성과 분석**
   - 듀얼 Y축 차트로 가치/수익률 동시 확인
   - 위험 지표 툴팁으로 상세 이해
   - 다른 프로젝트와 대시보드에서 비교

7. **🔄 전략 개선**
   - 백테스트 결과 기반 전략 수정
   - 새 버전 생성 및 재검증
   - 성과 개선 추적

---

## 🎯 v1.0.0 완성도 및 품질

### ✅ 완료된 기능 (구현률: 95%)

- [x] **완전한 프로젝트 관리 시스템**
- [x] **고도화된 이중 전략 에디터**
- [x] **30년 실제 주식 데이터 연동**
- [x] **자동 저장 백테스트 시스템**
- [x] **성과 중심 스마트 대시보드**
- [x] **확장된 주식 추이 분석 도구**
- [x] **완전한 테마 시스템**
- [x] **최적화된 환경설정**
- [x] **다크모드 특화 사이드바**
- [x] **픽셀 퍼펙트 UI/UX**

### 🔧 품질 보증

- **TypeScript 100%**: 모든 코드 타입 안전성
- **ESLint 통과**: 커스텀 규칙 포함
- **Angular 커밋**: 일관된 버전 관리
- **테스트 검증**: 드래그앤드롭 포함 핵심 기능
- **브라우저 호환**: 모던 브라우저 완전 지원

### 🏆 사용자 경험

- **직관적 조작**: 프로그래밍 지식 불필요
- **즉시 피드백**: 모든 작업의 실시간 반응
- **데이터 안전**: 자동 저장 + 백업/복원
- **시각적 완성도**: 프로덕션 레벨 UI
- **접근성**: 다크모드 + 툴팁 + 키보드

---

## 🔮 향후 확장 계획 (v2.0+)

### 📈 데이터 & 분석

- [ ] **실시간 데이터**: WebSocket 기반 라이브 가격
- [ ] **기술적 지표**: RSI, MACD, 볼린저 밴드
- [ ] **포트폴리오 분산**: 다종목 동시 투자 전략
- [ ] **위험 관리**: VaR, 포지션 사이징

### 🤝 커뮤니티 & 공유

- [ ] **전략 마켓플레이스**: 우수 전략 공유
- [ ] **백테스트 경쟁**: 리더보드 시스템
- [ ] **소셜 기능**: 팔로우, 댓글, 평가
- [ ] **알림 시스템**: 이메일, 슬랙, 텔레그램

### ☁️ 클라우드 & 확장

- [ ] **백엔드 API**: 서버 기반 데이터 동기화
- [ ] **실시간 알림**: 조건 만족 시 자동 알림
- [ ] **모바일 앱**: React Native 크로스 플랫폼
- [ ] **프리미엄 기능**: 고급 지표, 더 많은 데이터

---

## 📞 릴리즈 정보

### 🎉 v1.0.0 릴리즈 노트 (2024.12.18)

#### 🚀 주요 기능

- 완전한 투자 전략 설계 및 백테스트 플랫폼
- 룰 기반 + 플로우차트 이중 에디터
- 30년 히스토리 실제 주식 데이터
- 자동 저장 백테스트 시스템
- 다크모드 완전 지원

#### 🎨 UI/UX 하이라이트

- 픽셀 퍼펙트 정렬
- 다크모드 최적화 사이드바
- 직관적 드래그앤드롭
- 실시간 테마 전환
- 프로덕션 레벨 완성도

#### 📊 백테스트 엔진

- 퍼센트 수익률 정확한 계산
- 수수료 및 슬리피지 반영
- 듀얼 Y축 차트 시각화
- 위험 지표 상세 툴팁

#### 🔧 개발자 경험

- TypeScript 100% 타입 안전
- Angular 커밋 컨벤션
- ESLint 커스텀 규칙
- 자동 빌드 및 배포

### 🐛 알려진 제한사항

- 모바일 최적화 부분적 (태블릿까지 권장)
- 대용량 백테스트 시 메모리 사용량 (30년 데이터)
- 브라우저 로컬 스토리지 의존 (클라우드 v2.0+)

### 📝 기술 정보

- **저장소**: https://github.com/sshrik/jmt-cursor
- **개발자**: @sshrik
- **라이선스**: MIT
- **Node.js**: >=18.0.0
- **브라우저**: Chrome 90+, Firefox 88+, Safari 14+

---

_릴리즈 날짜: 2024.12.18 | 문서 버전: v1.0.0 | 작성자: @sshrik_
